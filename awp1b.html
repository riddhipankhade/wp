<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lab 1B — Responsive E-Commerce Cards</title>

  <!-- Bootstrap 5 CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    body { background: #f7f9fc; }
    .navbar-brand span { font-weight: 700; }
    .card-img-top {
      height: 180px;
      object-fit: cover;
    }
    .price { font-weight: 700; }
    .card:hover { transform: translateY(-3px); transition: 0.2s ease; }
    .rating { font-size: .9rem; }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-white shadow-sm sticky-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <span class="ms-1">MyShop</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link active" href="#">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Deals</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Header / Search -->
  <header class="py-4">
    <div class="container">
      <div class="d-flex flex-column flex-md-row align-items-md-center gap-3">
        <h1 class="m-0">Products</h1>
        <div class="ms-md-auto w-100 w-md-50">
          <input id="search" type="search" class="form-control" placeholder="Search products…" />
        </div>
      </div>
    </div>
  </header>

  <!-- Product Grid -->
  <main class="pb-5">
    <div class="container">
      <!-- Responsive: 1,2,3,4 columns on xs, sm, md, lg -->
      <div id="productGrid" class="row g-4 row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4">
        <!-- Cards injected here by JavaScript -->
      </div>
    </div>
  </main>

  <!-- Product Detail Modal -->
  <div class="modal fade" id="detailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="detailTitle" class="modal-title"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img id="detailImg" class="img-fluid rounded mb-3" alt="Product image" />
          <p id="detailDesc" class="mb-2"></p>
          <p class="mb-0"><span class="fw-semibold">Price:</span> <span id="detailPrice" class="price"></span></p>
          <p class="mb-0"><span class="fw-semibold">Rating:</span> <span id="detailRating"></span></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
          <button class="btn btn-primary">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (Bundle includes Popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Sample product data (dynamic render)
    const products = [
      {
        title: "Wireless Headphones",
        price: 1999,
        rating: 4.5,
        img: "https://images.unsplash.com/photo-1518442681920-2019c7b40a43?q=80&w=1200&auto=format&fit=crop",
        desc: "Bluetooth over-ear headphones with noise isolation and 20-hour battery."
      },
      {
        title: "Smart Watch",
        price: 3499,
        rating: 4.2,
        img: "https://images.unsplash.com/photo-1511735111819-9a3f7709049c?q=80&w=1200&auto=format&fit=crop",
        desc: "Fitness tracking, notifications, sleep monitor, and water resistant."
      },
      {
        title: "DSLR Camera",
        price: 42999,
        rating: 4.7,
        img: "https://images.unsplash.com/photo-1519183071298-a2962be96f83?q=80&w=1200&auto=format&fit=crop",
        desc: "24MP sensor, 4K video, fast autofocus—great for beginners and pros."
      },
      {
        title: "Gaming Mouse",
        price: 1299,
        rating: 4.3,
        img: "https://images.unsplash.com/photo-1587202372616-b43abea06f81?q=80&w=1200&auto=format&fit=crop",
        desc: "Ergonomic design with adjustable DPI and RGB lighting."
      },
      {
        title: "Running Shoes",
        price: 2599,
        rating: 4.1,
        img: "https://images.unsplash.com/photo-1528701800489-20be3c2ea4f1?q=80&w=1200&auto=format&fit=crop",
        desc: "Lightweight, breathable fabric with cushioned sole for daily runs."
      },
      {
        title: "Backpack",
        price: 1599,
        rating: 4.0,
        img: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1200&auto=format&fit=crop",
        desc: "Water-resistant 25L capacity with laptop sleeve and organizer."
      },
      {
        title: "Bluetooth Speaker",
        price: 1799,
        rating: 4.4,
        img: "https://images.unsplash.com/photo-1490376840453-5f616fbebe5b?q=80&w=1200&auto=format&fit=crop",
        desc: "Portable speaker with deep bass and 10-hour playback."
      },
      {
        title: "Sunglasses",
        price: 899,
        rating: 4.2,
        img: "https://images.unsplash.com/photo-1511499767150-a48a237f0083?q=80&w=1200&auto=format&fit=crop",
        desc: "UV-protected lenses with lightweight, stylish frame."
      }
    ];

    const grid = document.getElementById("productGrid");
    const search = document.getElementById("search");
    const modal = new bootstrap.Modal(document.getElementById("detailModal"));

    // Render function
    function render(list) {
      grid.innerHTML = "";
      list.forEach((p, idx) => {
        const col = document.createElement("div");
        col.className = "col";

        col.innerHTML = `
          <div class="card h-100">
            <img src="${p.img}" class="card-img-top" alt="${p.title}" />
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">${p.title}</h5>
              <p class="card-text flex-grow-1">${p.desc.substring(0, 80)}...</p>
              <div class="d-flex justify-content-between align-items-center">
                <span class="price">₹${p.price.toLocaleString("en-IN")}</span>
                <span class="rating">⭐ ${p.rating}</span>
              </div>
              <div class="mt-3 d-flex gap-2">
                <button class="btn btn-outline-primary btn-sm" data-idx="${idx}" data-action="view">View</button>
                <button class="btn btn-primary btn-sm">Add to Cart</button>
              </div>
            </div>
          </div>
        `;

        grid.appendChild(col);
      });
    }

    // Initial render
    render(products);

    // Search/filter
    search.addEventListener("input", (e) => {
      const q = e.target.value.toLowerCase().trim();
      const filtered = products.filter(p => p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
      render(filtered);
    });

    // Delegate "View" click to open modal with details
    grid.addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-action='view']");
      if (!btn) return;
      const p = products[btn.getAttribute("data-idx")];
      document.getElementById("detailTitle").textContent = p.title;
      document.getElementById("detailImg").src = p.img;
      document.getElementById("detailDesc").textContent = p.desc;
      document.getElementById("detailPrice").textContent = "₹" + p.price.toLocaleString("en-IN");
      document.getElementById("detailRating").textContent = "⭐ " + p.rating;
      modal.show();
    });
  </script>
</body>
</html>
